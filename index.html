<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEARTS IN MOTION: Beyond Compliance - MOON Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .bg-primary { background-color: #0d1117; }
        .text-accent { color: #58a6ff; }
        .border-accent { border-color: #58a6ff; }
        .shadow-glow { box-shadow: 0 0 10px rgba(88, 166, 255, 0.5); }
        .gradient-bg { background-image: linear-gradient(180deg, #1c222c, #0d1117); }

        /* Heart Beat Animation */
        @keyframes beat {
            0%, 100% { transform: scale(1); opacity: 1; }
            30% { transform: scale(1.15); opacity: 0.8; }
        }
        .heart-beat {
            animation: beat 1.5s ease-in-out infinite;
        }

        /* Toast Notification Styles */
        #toast-container {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .toast {
            background-color: #1a232b;
            color: #d1d5db;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            max-width: 300px;
            opacity: 0;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            transform: translateX(100%);
        }
        .toast.show {
            opacity: 1;
            transform: translateX(0);
        }
    </style>
</head>
<body class="bg-primary text-gray-100 min-h-screen">

    <!-- Toast Notification Container -->
    <div id="toast-container"></div>

    <div class="max-w-4xl mx-auto p-4 md:p-8">
        <!-- Header & Language Toggle -->
        <header class="mb-10 pt-4">
            <div class="flex justify-between items-center mb-6">
                <!-- Language Toggle Mockup -->
                <div class="text-sm font-semibold flex space-x-2 p-1 bg-gray-800 rounded-lg">
                    <span id="lang-en" class="cursor-pointer px-3 py-1 bg-accent text-primary rounded-md transition duration-200">English</span>
                    <span id="lang-sh" class="cursor-pointer px-3 py-1 hover:bg-gray-700 rounded-md transition duration-200">Shona</span>
                </div>
                <!-- Above the Fold CTA -->
                <a href="#action-section" class="text-sm text-accent hover:text-blue-400 underline font-medium transition duration-200">
                    Skip to the Solution: Start Your 15-Minute Support Pact
                </a>
            </div>

            <!-- Main Title -->
            <h1 class="text-4xl md:text-5xl font-extrabold text-white leading-tight flex items-center">
                <span class="mr-3 heart-beat text-red-500 text-3xl md:text-4xl">‚ù§</span>
                HEARTS IN MOTION
            </h1>
            <h2 class="text-xl md:text-2xl text-accent font-light mt-1">
                Beyond Compliance‚ÄîHypertension is a System Problem
            </h2>
        </header>

        <!-- Global Support Counter -->
        <div class="text-center py-6 mb-10 border-b border-t border-gray-700 bg-gray-900 rounded-xl shadow-lg">
            <p class="text-gray-400 text-sm mb-2 uppercase tracking-widest">Total Global Support Pacts Committed:</p>
            <div class="text-6xl md:text-7xl font-mono font-bold text-green-400">
                <span id="pacts-counter">4,120</span>
            </div>
            <p class="text-gray-500 text-xs mt-2">This number updates in real-time as users commit to the action plan.</p>
        </div>

        <!-- 1. The Structural Truth -->
        <section class="mb-12">
            <h3 class="text-2xl md:text-3xl font-semibold mb-4 text-white">
                1. It's Not Your Fault: How the System is Making You Sick
            </h3>
            <div class="space-y-4 text-gray-300 leading-relaxed">
                <p>Hypertension affects 30-33% of adults in peri-urban African settings. The failure is rooted in **Structural Violence**‚Äîsystemic barriers like transport costs, clinic distance, and poor policy‚Äînot individual patient failure.</p>
                
                <p class="p-3 bg-gray-800 border-l-4 border-accent rounded-lg">
                    <strong class="text-accent">Concept Analogy:</strong> Think of it like trying to run a race with ankle weights‚Äîthe weights (unaffordable clinics, lack of support, chronic stress) are the problem, not your effort.
                </p>

                <p>**Reframing:** Suffering is produced by flawed social arrangements. Our solution focuses on fixing the stress-inducing structure, not just the symptom.</p>
            </div>
        </section>

        <!-- 2. Systems Pressure: The R-Loop Visualized -->
        <section class="mb-12">
            <h3 class="text-2xl md:text-3xl font-semibold mb-4 text-white">
                2. Systems Pressure: Visualizing The Stress Trap
            </h3>
            <p class="mb-6 text-gray-300">
                The **Caregiving Drain** is a **Vicious Cycle** (Reinforcing Loop) where stress perpetuates poor adherence. Use the slider below to model the impact:
            </p>

            <!-- Interactive CLD Demo -->
            <div class="bg-gray-800 p-6 rounded-xl shadow-xl">
                <h4 class="text-lg font-medium mb-4 text-white">Interactive Demo: Caregiving Burden vs. Adherence</h4>
                
                <div class="mb-6">
                    <label for="burdenSlider" class="block mb-2 text-sm font-medium text-gray-300">Adjust Caregiving Burden/Stress Level:</label>
                    <input type="range" id="burdenSlider" min="0" max="100" value="50" class="w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer range-lg">
                    <div class="flex justify-between text-xs mt-2 text-gray-400">
                        <span>Low Burden (Low Stress Trap)</span>
                        <span>High Burden (Severe Stress Trap)</span>
                    </div>
                </div>

                <!-- Visualization Feedback -->
                <div class="flex flex-col items-center justify-center p-4 rounded-lg bg-gray-900 border border-gray-700">
                    <div id="r-loop-icon" class="text-5xl transition-all duration-300 ease-in-out" style="color: #6ee7b7;">‚ù§Ô∏è</div>
                    <p id="r-loop-insight" class="text-sm mt-3 text-center transition-all duration-300 ease-in-out text-green-300 font-medium">
                        Insight: Balanced support leads to better heart health and lower stress.
                    </p>
                </div>
                
                <p class="text-sm mt-4 text-gray-400">
                    **Insight:** Stress makes medication adherence harder, worsening health, which increases stress. Disruption is required to break this **Vicious Cycle**.
                </p>
            </div>
        </section>

        <!-- 3. Calculate Your Structural Stress Score -->
        <section class="mb-12">
            <h3 class="text-2xl md:text-3xl font-semibold mb-4 text-white">
                3. Calculate Your Structural Stress Score
            </h3>
            <p class="mb-6 text-gray-300">
                Use this simple tool (HFE principle of low cognitive load) to quickly assess your own exposure to the structural stress that hinders adherence.
            </p>

            <div class="bg-gray-800 p-6 rounded-xl shadow-xl space-y-6">
                <!-- Question 1 -->
                <div>
                    <p class="font-medium text-white mb-2">Q1. Caregiving Burden: How many hours did you spend on chores/caregiving for others last week?</p>
                    <div class="space-y-2">
                        <label class="block"><input type="radio" name="q1" value="1" class="mr-2 accent-accent" checked>Less than 5 hours (Low Burden)</label>
                        <label class="block"><input type="radio" name="q1" value="3" class="mr-2 accent-accent">5 - 15 hours (Moderate Burden)</label>
                        <label class="block"><input type="radio" name="q1" value="5" class="mr-2 accent-accent">15 - 30 hours (High Burden)</label>
                        <label class="block"><input type="radio" name="q1" value="7" class="mr-2 accent-accent">Over 30 hours (Critical Burden)</label>
                    </div>
                </div>

                <!-- Question 2 -->
                <div>
                    <p class="font-medium text-white mb-2">Q2. Structural Access: How long does it take you (one way) to get to the nearest health facility?</p>
                    <div class="space-y-2">
                        <label class="block"><input type="radio" name="q2" value="1" class="mr-2 accent-accent" checked>Less than 15 minutes (High Access)</label>
                        <label class="block"><input type="radio" name="q2" value="3" class="mr-2 accent-accent">15 - 60 minutes</label>
                        <label class="block"><input type="radio" name="q2" value="5" class="mr-2 accent-accent">Over 60 minutes (Low Access)</label>
                    </div>
                </div>

                <!-- Question 3 -->
                <div>
                    <p class="font-medium text-white mb-2">Q3. Cognitive Load: How often do you feel too stressed or tired to remember to take your medication?</p>
                    <div class="space-y-2">
                        <label class="block"><input type="radio" name="q3" value="1" class="mr-2 accent-accent" checked>Never / Rarely</label>
                        <label class="block"><input type="radio" name="q3" value="3" class="mr-2 accent-accent">Sometimes</label>
                        <label class="block"><input type="radio" name="q3" value="5" class="mr-2 accent-accent">Often / Always</label>
                    </div>
                </div>

                <button id="calculate-score-btn" class="w-full bg-accent text-primary font-bold py-3 rounded-lg hover:bg-blue-400 transition duration-200">
                    Calculate My Score
                </button>

                <div id="score-result" class="mt-4 p-4 rounded-lg bg-gray-900 border border-gray-700 text-center">
                    <p class="font-semibold text-xl">Your Structural Stress Score is: <span id="current-score">0 / 17</span></p>
                    <p id="score-diagnosis" class="mt-2 text-gray-400">Answer the questions above to get your personalized diagnosis and action plan.</p>
                </div>
            </div>
        </section>

        <!-- 4. Action: Start Your Support Pact -->
        <section id="action-section" class="mb-12">
            <h3 class="text-2xl md:text-3xl font-semibold mb-4 text-white">
                4. Action: Start Your Support Pact
            </h3>
            <p class="mb-6 text-gray-300">
                This intervention is designed using HFE principles to be **intuitive and fail-safe** by reducing cognitive load and sharing the burden.
            </p>

            <!-- 15-Minute Support Pact Details -->
            <div class="bg-gray-800 p-6 rounded-xl shadow-xl">
                <h4 class="text-xl font-bold text-accent mb-4">The 15-Minute Support Pact</h4>
                <p class="text-gray-300 mb-6">This is a practical, **low-effort, high-impact** step to disrupt the **Vicious Cycle** (Caregiving Drain).</p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                    <div class="p-4 bg-gray-900 rounded-lg border border-green-500/50 shadow-md">
                        <p class="text-4xl mb-2">1Ô∏è‚É£</p>
                        <p class="font-bold text-green-400">Step 1: Find a Partner</p>
                        <p class="text-sm text-gray-400">Someone who can spare 15 minutes a week for a shared chore or check-in.</p>
                    </div>
                    <div class="p-4 bg-gray-900 rounded-lg border border-green-500/50 shadow-md">
                        <p class="text-4xl mb-2">2Ô∏è‚É£</p>
                        <p class="font-bold text-green-400">Step 2: Define the 15 Minutes</p>
                        <p class="text-sm text-gray-400">The time must be dedicated to *reducing your burden* (Low Cognitive Load).</p>
                    </div>
                    <div class="p-4 bg-gray-900 rounded-lg border border-green-500/50 shadow-md">
                        <p class="text-4xl mb-2">3Ô∏è‚É£</p>
                        <p class="font-bold text-green-400">Step 3: Commit & Check In</p>
                        <p class="text-sm text-gray-400">Use a weekly message (WhatsApp/SMS) as your new support structure.</p>
                    </div>
                </div>

                <button id="commit-pact-btn" class="mt-6 w-full bg-green-500 text-primary font-extrabold text-lg py-4 rounded-lg hover:bg-green-400 transition duration-200 shadow-lg shadow-green-500/30">
                    ü§ù I Commit! Record My Support Pact
                </button>
                <p id="commit-message" class="mt-3 text-center text-sm text-gray-400 hidden">Thank you for committing! Your support pact has been recorded.</p>
            </div>
        </section>
        
        <!-- Support Us: Email Submission -->
        <section class="mb-12">
            <h3 class="text-2xl md:text-3xl font-semibold mb-4 text-white">
                5. Support Broader Change & Get Resources
            </h3>
            <p class="mb-6 text-gray-300">
                Enter your email below to receive the 1-Page Starter Guide for your pact and to join our advocacy network.
            </p>
            
            <div class="bg-gray-800 p-6 rounded-xl shadow-xl">
                <h4 class="text-xl font-bold text-white mb-4">Join Our Digital Outreach Network</h4>
                <div class="flex flex-col md:flex-row gap-3">
                    <input type="email" id="support-email" placeholder="Your Email Address" class="flex-grow p-3 rounded-lg bg-gray-900 border border-gray-700 text-white placeholder-gray-500 focus:ring-accent focus:border-accent" required>
                    <button id="submit-email-btn" class="bg-accent text-primary font-bold py-3 px-6 rounded-lg hover:bg-blue-400 transition duration-200">
                        Sign Up for Support
                    </button>
                </div>
                <p class="text-xs mt-3 text-gray-400">
                    Responses are usually sent within 24-48 hours. Your email will be sent to the project lead at 
                    <a href="mailto:munotidaishe@gmail.com" class="text-accent hover:underline">munotidaishe@gmail.com</a>.
                </p>
                <p id="email-submit-message" class="mt-3 text-sm font-medium text-green-400 hidden">Success! Check your inbox for the Starter Guide soon.</p>
            </div>
        </section>

        <!-- 6. Frequently Asked Questions -->
        <section class="mb-12">
            <h3 class="text-2xl md:text-3xl font-semibold mb-4 text-white">
                6. Frequently Asked Questions
            </h3>
            
            <div class="space-y-4 text-gray-300">
                <!-- FAQ Item 1 -->
                <details class="bg-gray-800 p-4 rounded-lg cursor-pointer transition duration-200 hover:bg-gray-700">
                    <summary class="font-medium text-white">What is the "Caregiving Drain" (Vicious Cycle)?</summary>
                    <p class="mt-2 text-sm">It is a Systems Thinking concept where increased domestic and caregiving duties (stress) lead to fatigue and lack of time, which causes poor adherence to medication, which worsens blood pressure, and in turn, increases health-related stress, perpetuating the **Vicious Cycle**.</p>
                </details>

                <!-- FAQ Item 2 -->
                <details class="bg-gray-800 p-4 rounded-lg cursor-pointer transition duration-200 hover:bg-gray-700">
                    <summary class="font-medium text-white">How does Structural Violence relate to my health?</summary>
                    <p class="mt-2 text-sm">Structural Violence, a Medical Anthropology concept, means that your poor health outcomes are caused by social and political structures (like unaffordable clinics, weak transport, or poor policy), not by your personal choices. This shift in perspective is the first step toward collective advocacy.</p>
                </details>

                <!-- FAQ Item 3 -->
                <details class="bg-gray-800 p-4 rounded-lg cursor-pointer transition duration-200 hover:bg-gray-700">
                    <summary class="font-medium text-white">Why focus on "Low Cognitive Load"?</summary>
                    <p class="mt-2 text-sm">Human Factors Engineering (HFE) principles demand that solutions be easy to use under pressure. Since hypertension patients often experience stress and high cognitive load, our action plan focuses on simple, 15-minute, zero-guilt actions to ensure feasibility and maximize adherence.</p>
                </details>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center py-6 text-gray-500 border-t border-gray-700 mt-10">
            <p>¬© Final Project GPSI. Designed by Munotidaishe Mantiziba (MOON).</p>
            <p class="text-sm mt-1">A system-level intervention inspired by Structural Violence, HFE, and the real voices of the community.</p>
        </footer>
    </div>

    <script>
        // --- Firebase/API Mocks (For Demonstration) ---
        // In a live environment, these functions would interact with a database (like Firestore)
        const __app_id = 'hearts-in-motion-advocacy';
        
        // --- Global Variables and Constants ---
        const PACTS_COUNT_STORAGE_KEY = 'heartsInMotionPactsCount';
        const INITIAL_PACT_COUNT = 4120;
        const PACT_INCREMENT = 1;
        
        // --- Fact Array for "Did You Know" Toasts ---
        const didYouKnowFacts = [
            "Did You Know? Stress can elevate blood pressure by constricting blood vessels, making adherence harder.",
            "Did You Know? In some African settings, transport costs to the clinic can be up to 30% of a family's weekly income.",
            "Did You Know? Hypertension is often called the 'silent killer' because it usually has no symptoms until it causes a crisis.",
            "Did You Know? The 15-Minute Support Pact is designed to reduce your cognitive load, making life-saving habits easier.",
            "Did You Know? Structural Violence refers to harm caused by social institutions and policies, not individual behavior.",
            "Did You Know? A healthy blood pressure is typically below 120/80 mmHg. Monitoring is key!",
            "Did You Know? Poor sleep quality is directly linked to higher blood pressure and increased stress.",
            "Did You Know? Sharing just one chore a week can significantly reduce the overall stress in a caregiving household.",
            "Did You Know? Human Factors Engineering (HFE) principles are used in this project to create fail-safe solutions.",
            "Did You Know? Up to 33% of adults in peri-urban African settings are affected by hypertension.",
            "Did You Know? The 'Vicious Cycle' explains why effort alone often isn't enough to manage chronic conditions under stress.",
            "Did You Know? Policy changes related to public transport and clinic access are critical structural solutions.",
            "Did You Know? You can control up to 80% of your risk factors for heart disease through lifestyle changes and support.",
            "Did You Know? Salt reduction is one of the fastest ways to see a drop in blood pressure readings.",
            "Did You Know? The goal is 'Beyond Compliance'‚Äîmeaning we focus on fixing the environment, not blaming the patient."
        ];


        // --- Functions ---

        /**
         * Initializes and animates the global pacts counter.
         */
        function initializePactsCounter() {
            const counterElement = document.getElementById('pacts-counter');
            let currentCount = parseInt(localStorage.getItem(PACTS_COUNT_STORAGE_KEY)) || INITIAL_PACT_COUNT;

            const updateCounter = () => {
                counterElement.textContent = currentCount.toLocaleString();
                localStorage.setItem(PACTS_COUNT_STORAGE_KEY, currentCount.toString());
            };

            // Simple animation from 0 to current count (optional)
            let startCount = INITIAL_PACT_COUNT - 50; 
            const duration = 2000;
            const startTime = performance.now();

            const animateCount = (timestamp) => {
                const elapsed = timestamp - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const animatedValue = Math.floor(startCount + (currentCount - startCount) * progress);
                counterElement.textContent = animatedValue.toLocaleString();

                if (progress < 1) {
                    requestAnimationFrame(animateCount);
                } else {
                    updateCounter(); // Ensure final value is set
                }
            };
            requestAnimationFrame(animateCount);
        }

        /**
         * Logic for the R-Loop (Caregiving Burden) visualization.
         */
        function updateRLoopVisualization() {
            const slider = document.getElementById('burdenSlider');
            const icon = document.getElementById('r-loop-icon');
            const insight = document.getElementById('r-loop-insight');
            const value = parseInt(slider.value);

            let iconText, color, message, scale;

            if (value < 30) {
                // Low Burden
                iconText = '‚ù§Ô∏è';
                color = '#4ade80'; // Green
                message = 'Insight: Balanced support leads to better heart health and lower stress.';
                scale = 'scale(1.2)';
            } else if (value < 70) {
                // Moderate Burden
                iconText = 'üíõ';
                color = '#fbbf24'; // Yellow
                message = 'Insight: Stress is increasing. Risk is moderate. Support is needed.';
                scale = 'scale(1)';
            } else {
                // High Burden
                iconText = 'üíî';
                color = '#ef4444'; // Red
                message = 'Insight: Severe Stress Trap! Adherence is failing, and health is at risk.';
                scale = 'scale(0.8)';
            }

            icon.textContent = iconText;
            icon.style.color = color;
            icon.style.transform = scale;
            insight.textContent = message;
            insight.style.color = color;
        }

        /**
         * Logic for the Structural Stress Score calculator.
         */
        function calculateStructuralStressScore() {
            const q1 = parseInt(document.querySelector('input[name="q1"]:checked').value);
            const q2 = parseInt(document.querySelector('input[name="q2"]:checked').value);
            const q3 = parseInt(document.querySelector('input[name="q3"]:checked').value);
            const score = q1 + q2 + q3;
            const maxScore = 7 + 5 + 5; // Max possible score is 17

            const currentScoreEl = document.getElementById('current-score');
            const diagnosisEl = document.getElementById('score-diagnosis');

            currentScoreEl.textContent = `${score} / ${maxScore}`;

            let diagnosisText, colorClass;

            if (score <= 5) {
                diagnosisText = "Diagnosis: Low Stress. Maintain your current support system, but stay aware of potential traps.";
                colorClass = 'text-green-400';
            } else if (score <= 10) {
                diagnosisText = "Diagnosis: Moderate Stress Risk. You are feeling the pressure. Starting the 15-Minute Support Pact is highly recommended.";
                colorClass = 'text-yellow-400';
            } else {
                diagnosisText = "Diagnosis: High Risk. You are caught in a severe Stress Trap. Start the 15-Minute Support Pact *right now* to break the cycle and protect your heart.";
                colorClass = 'text-red-400';
            }

            // Apply color coding and text
            diagnosisEl.className = `mt-2 font-semibold ${colorClass}`;
            diagnosisEl.textContent = diagnosisText;
        }
        
        /**
         * Handles the pact commitment button click.
         */
        function handleCommitPact() {
            const messageEl = document.getElementById('commit-message');
            const counterElement = document.getElementById('pacts-counter');
            
            // 1. Update Counter
            let currentCount = parseInt(localStorage.getItem(PACTS_COUNT_STORAGE_KEY)) || INITIAL_PACT_COUNT;
            currentCount += PACT_INCREMENT;
            counterElement.textContent = currentCount.toLocaleString();
            localStorage.setItem(PACTS_COUNT_STORAGE_KEY, currentCount.toString());

            // 2. Show Success Message
            messageEl.textContent = "SUCCESS! Your Support Pact has been recorded. Check the 'Support Broader Change' section below to sign up for your 1-Page Starter Guide.";
            messageEl.classList.remove('hidden', 'text-gray-400');
            messageEl.classList.add('text-green-400');

            // 3. Simple toast confirmation (optional, as we have the message element)
            showToast('Pact committed! Thank you for joining the movement.', 'green');
        }

        /**
         * Handles the email submission for support.
         */
        function handleSubmitEmail() {
            const emailInput = document.getElementById('support-email');
            const messageEl = document.getElementById('email-submit-message');
            const email = emailInput.value.trim();

            if (!email || !email.includes('@') || !email.includes('.')) {
                showToast('Please enter a valid email address.', 'red');
                return;
            }

            // Simulate API submission
            console.log(`Simulating email submission for: ${email}. Sending to munotidaishe@gmail.com.`);
            
            emailInput.value = ''; // Clear input
            messageEl.textContent = `Success! Thank you for your support. Your Starter Guide request is logged for ${email}. Check your inbox in 24-48 hours.`;
            messageEl.classList.remove('hidden');
            showToast('Support email submitted! Check your inbox soon.', 'green');
        }


        // --- "Did You Know" Toast Notification System ---

        /**
         * Creates and displays a toast notification.
         * @param {string} message The text content of the toast.
         * @param {string} type 'green' for success, 'red' for error, default for info.
         */
        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            
            let borderColor = '#58a6ff'; // Accent Blue (info)
            if (type === 'green') borderColor = '#4ade80';
            if (type === 'red') borderColor = '#ef4444';

            toast.className = 'toast border-l-4 transition-all duration-300';
            toast.style.borderColor = borderColor;
            toast.textContent = message;
            
            container.appendChild(toast);
            
            // Show the toast
            setTimeout(() => {
                toast.classList.add('show');
            }, 10); 

            // Hide and remove the toast
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    toast.remove();
                }, 500); // Wait for the transition to finish
            }, 8000); // Display time
        }

        /**
         * Starts the random fact notification loop.
         */
        function startFactNotifications() {
            const displayRandomFact = () => {
                const randomIndex = Math.floor(Math.random() * didYouKnowFacts.length);
                const fact = didYouKnowFacts[randomIndex];
                showToast(`üß† ${fact}`, 'info');

                // Random delay between 15 and 45 seconds (15000ms to 45000ms)
                const nextDelay = Math.random() * 30000 + 15000;
                setTimeout(displayRandomFact, nextDelay);
            };

            // Start after an initial 5-second delay
            setTimeout(displayRandomFact, 5000);
        }
        
        // --- Event Listeners and Initialization ---

        window.onload = function() {
            initializePactsCounter();
            updateRLoopVisualization(); // Initialize R-Loop visualization
            startFactNotifications();

            // Set up all dynamic listeners
            document.getElementById('burdenSlider').addEventListener('input', updateRLoopVisualization);
            document.getElementById('calculate-score-btn').addEventListener('click', calculateStructuralStressScore);
            document.getElementById('commit-pact-btn').addEventListener('click', handleCommitPact);
            document.getElementById('submit-email-btn').addEventListener('click', handleSubmitEmail);

            // Mock language switch behavior (only English content is present)
            document.getElementById('lang-en').addEventListener('click', () => {
                document.getElementById('lang-en').classList.add('bg-accent', 'text-primary');
                document.getElementById('lang-sh').classList.remove('bg-accent', 'text-primary');
            });
            document.getElementById('lang-sh').addEventListener('click', () => {
                document.getElementById('lang-sh').classList.add('bg-accent', 'text-primary');
                document.getElementById('lang-en').classList.remove('bg-accent', 'text-primary');
                showToast('Shona translation coming soon!', 'info');
            });

            // Run initial score calculation
            calculateStructuralStressScore();
        };

        
    </script>
</body>
</html>
